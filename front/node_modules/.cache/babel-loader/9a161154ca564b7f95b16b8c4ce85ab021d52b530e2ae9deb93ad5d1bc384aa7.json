{"ast":null,"code":"import{useQuery}from\"@tanstack/react-query\";import React from\"react\";import{getUserProfile}from\"../../services/index/users\";import{useSelector}from\"react-redux\";import{stables}from\"../../constants\";import{useNavigate}from\"react-router-dom\";import MainLayout from\"../../components/MainLayout\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Profile=props=>{const{avatar}=props;const userState=useSelector(state=>state.user);const navigate=useNavigate();console.log(\"Avatar:\",avatar);// fitching the user data from the database\nconst{// data , isLoading , error is a property where\n//assign to profileData, profileIsLoading, profileError in short rename the data , isLoading , error\ndata:profileData// isLoading: profileIsLoading,\n// error: profileError,\n}=useQuery({//function run when the page is loaded\nqueryFn:()=>{return getUserProfile({token:userState.userInfo.token});},queryKey:[\"profile\"]});console.log(profileData);return/*#__PURE__*/_jsx(MainLayout,{children:userState.userInfo?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{src:stables.UPLOAD_FOLDER_BASE_URL+(profileData===null||profileData===void 0?void 0:profileData.avatar),alt:\"Profile\"}),/*#__PURE__*/_jsx(\"p\",{children:profileData===null||profileData===void 0?void 0:profileData.name}),/*#__PURE__*/_jsx(\"p\",{children:profileData===null||profileData===void 0?void 0:profileData.email}),/*#__PURE__*/_jsx(\"p\",{children:profileData===null||profileData===void 0?void 0:profileData.role})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/login\"),className:\"login\",children:\"Login\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/register\"),className:\"signup-hidden\",children:\"Register\"})]})});};export default Profile;","map":{"version":3,"names":["useQuery","React","getUserProfile","useSelector","stables","useNavigate","MainLayout","jsx","_jsx","jsxs","_jsxs","Profile","props","avatar","userState","state","user","navigate","console","log","data","profileData","queryFn","token","userInfo","queryKey","children","src","UPLOAD_FOLDER_BASE_URL","alt","name","email","role","onClick","className"],"sources":["C:/Users/moral/Desktop/Capstone Project JAR/JAR/src/pages/profile/Profile.jsx"],"sourcesContent":["import { useQuery } from \"@tanstack/react-query\";\r\nimport React from \"react\";\r\nimport { getUserProfile } from \"../../services/index/users\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nimport { stables } from \"../../constants\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport MainLayout from \"../../components/MainLayout\";\r\n\r\nconst Profile = (props) => {\r\n   const { avatar } = props;\r\n   const userState = useSelector((state) => state.user);\r\n   const navigate = useNavigate();\r\n\r\n   console.log(\"Avatar:\", avatar);\r\n\r\n   // fitching the user data from the database\r\n   const {\r\n      // data , isLoading , error is a property where\r\n      //assign to profileData, profileIsLoading, profileError in short rename the data , isLoading , error\r\n      data: profileData,\r\n      // isLoading: profileIsLoading,\r\n      // error: profileError,\r\n   } = useQuery({\r\n      //function run when the page is loaded\r\n      queryFn: () => {\r\n         return getUserProfile({ token: userState.userInfo.token });\r\n      },\r\n      queryKey: [\"profile\"],\r\n   });\r\n\r\n   console.log(profileData);\r\n\r\n   return (\r\n      <MainLayout>\r\n         {userState.userInfo ? (\r\n            <div>\r\n               <img\r\n                  src={stables.UPLOAD_FOLDER_BASE_URL + profileData?.avatar}\r\n                  alt=\"Profile\"\r\n               />\r\n               <p>{profileData?.name}</p>\r\n               <p>{profileData?.email}</p>\r\n               <p>{profileData?.role}</p>\r\n               {/* <p>{new Date(profileData.createdAt).getDate()}</p> */}\r\n            </div>\r\n         ) : (\r\n            <div>\r\n               <button onClick={() => navigate(\"/login\")} className=\"login\">\r\n                  Login\r\n               </button>\r\n               <button\r\n                  onClick={() => navigate(\"/register\")}\r\n                  className=\"signup-hidden\"\r\n               >\r\n                  Register\r\n               </button>\r\n            </div>\r\n         )}\r\n      </MainLayout>\r\n   );\r\n};\r\n\r\nexport default Profile;\r\n"],"mappings":"AAAA,OAASA,QAAQ,KAAQ,uBAAuB,CAChD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,cAAc,KAAQ,4BAA4B,CAC3D,OAASC,WAAW,KAAQ,aAAa,CAEzC,OAASC,OAAO,KAAQ,iBAAiB,CACzC,OAASC,WAAW,KAAQ,kBAAkB,CAE9C,MAAO,CAAAC,UAAU,KAAM,6BAA6B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAErD,KAAM,CAAAC,OAAO,CAAIC,KAAK,EAAK,CACxB,KAAM,CAAEC,MAAO,CAAC,CAAGD,KAAK,CACxB,KAAM,CAAAE,SAAS,CAAGX,WAAW,CAAEY,KAAK,EAAKA,KAAK,CAACC,IAAI,CAAC,CACpD,KAAM,CAAAC,QAAQ,CAAGZ,WAAW,CAAC,CAAC,CAE9Ba,OAAO,CAACC,GAAG,CAAC,SAAS,CAAEN,MAAM,CAAC,CAE9B;AACA,KAAM,CACH;AACA;AACAO,IAAI,CAAEC,WACN;AACA;AACH,CAAC,CAAGrB,QAAQ,CAAC,CACV;AACAsB,OAAO,CAAEA,CAAA,GAAM,CACZ,MAAO,CAAApB,cAAc,CAAC,CAAEqB,KAAK,CAAET,SAAS,CAACU,QAAQ,CAACD,KAAM,CAAC,CAAC,CAC7D,CAAC,CACDE,QAAQ,CAAE,CAAC,SAAS,CACvB,CAAC,CAAC,CAEFP,OAAO,CAACC,GAAG,CAACE,WAAW,CAAC,CAExB,mBACGb,IAAA,CAACF,UAAU,EAAAoB,QAAA,CACPZ,SAAS,CAACU,QAAQ,cAChBd,KAAA,QAAAgB,QAAA,eACGlB,IAAA,QACGmB,GAAG,CAAEvB,OAAO,CAACwB,sBAAsB,EAAGP,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAER,MAAM,CAAC,CAC1DgB,GAAG,CAAC,SAAS,CACf,CAAC,cACFrB,IAAA,MAAAkB,QAAA,CAAIL,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAES,IAAI,CAAI,CAAC,cAC1BtB,IAAA,MAAAkB,QAAA,CAAIL,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEU,KAAK,CAAI,CAAC,cAC3BvB,IAAA,MAAAkB,QAAA,CAAIL,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEW,IAAI,CAAI,CAAC,EAExB,CAAC,cAENtB,KAAA,QAAAgB,QAAA,eACGlB,IAAA,WAAQyB,OAAO,CAAEA,CAAA,GAAMhB,QAAQ,CAAC,QAAQ,CAAE,CAACiB,SAAS,CAAC,OAAO,CAAAR,QAAA,CAAC,OAE7D,CAAQ,CAAC,cACTlB,IAAA,WACGyB,OAAO,CAAEA,CAAA,GAAMhB,QAAQ,CAAC,WAAW,CAAE,CACrCiB,SAAS,CAAC,eAAe,CAAAR,QAAA,CAC3B,UAED,CAAQ,CAAC,EACP,CACP,CACQ,CAAC,CAEnB,CAAC,CAED,cAAe,CAAAf,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React from\"react\";import{images}from\"../../constants\";import{MdEditSquare,MdQuickreply,MdRemoveCircle}from\"react-icons/md\";import CommentForm from\"./CommentForm\";// This is a component to display a single comment\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const Comment=_ref=>{let{comment,loggedinUserId,affectedComment,setAffectedComment,addComment,parentId=null,updateComment,deleteComment,replies}=_ref;// Creating a function to render the button to reply\nconst isUserLoggedin=Boolean(loggedinUserId);//   Creating Edit and Delete Function in the comments\nconst commentBelongsToUser=loggedinUserId===comment.user._id;const isReplying=affectedComment&&affectedComment.type===\"replying\"&&affectedComment._id===comment._id;const isEditing=affectedComment&&affectedComment.type===\"editing\"&&affectedComment._id===comment._id;const repliedCommentId=parentId?parentId:comment._id;const replyOnUserId=comment.user._id;return/*#__PURE__*/_jsxs(\"div\",{className:\"comment-box\",children:[/*#__PURE__*/_jsx(\"img\",{src:images.theProfile,alt:\"user\",className:\"comment-image\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"comment-text\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"comment-name\",children:comment.user.name}),/*#__PURE__*/_jsx(\"span\",{className:\"comment-date\",children:new Date(comment.createdAt).toLocaleDateString(\"en\",{day:\"numeric\",month:\"short\",year:\"numeric\",hour:\"2-digit\"})}),!isEditing&&/*#__PURE__*/_jsx(\"p\",{className:\"comment-desc\",children:comment.desc}),isEditing&&/*#__PURE__*/_jsx(CommentForm,{btnLabel:\"Update\",formSubmitHandler:value=>updateComment(value,comment._id),formCancelHandler:()=>setAffectedComment(null),initialText:comment.desc}),/*#__PURE__*/_jsxs(\"div\",{className:\"comment-action\",children:[isUserLoggedin&&/*#__PURE__*/_jsxs(\"button\",{className:\"comment-reply\",onClick:()=>setAffectedComment({type:\"replying\",_id:comment._id}),children:[/*#__PURE__*/_jsx(MdQuickreply,{className:\"comment-action-icon\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Reply\"})]}),commentBelongsToUser&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setAffectedComment({type:\"editing\",_id:comment._id}),className:\"comment-edit\",children:[/*#__PURE__*/_jsx(MdEditSquare,{className:\"comment-action-icon\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Edit\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>deleteComment(comment._id),className:\"comment-delete\",children:[/*#__PURE__*/_jsx(MdRemoveCircle,{className:\"comment-action-icon\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Delete\"})]})]})]}),isReplying&&/*#__PURE__*/_jsx(CommentForm,{btnLabel:\"Reply\",formSubmitHandler:value=>addComment(value,repliedCommentId,replyOnUserId),formCancelHandler:()=>setAffectedComment(null)}),replies.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"replies\",children:replies.map(reply=>/*#__PURE__*/_jsx(Comment,{comment:reply,loggedinUserId:loggedinUserId,affectedComment:affectedComment,setAffectedComment:setAffectedComment,addComment:addComment,updateComment:updateComment,deleteComment:deleteComment,replies:[]},reply._id))})]})]});};export default Comment;","map":{"version":3,"names":["React","images","MdEditSquare","MdQuickreply","MdRemoveCircle","CommentForm","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Comment","_ref","comment","loggedinUserId","affectedComment","setAffectedComment","addComment","parentId","updateComment","deleteComment","replies","isUserLoggedin","Boolean","commentBelongsToUser","user","_id","isReplying","type","isEditing","repliedCommentId","replyOnUserId","className","children","src","theProfile","alt","name","Date","createdAt","toLocaleDateString","day","month","year","hour","desc","btnLabel","formSubmitHandler","value","formCancelHandler","initialText","onClick","length","map","reply"],"sources":["C:/Users/moral/Desktop/Capstone Project JAR/JAR/src/components/comments/Comment.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { images } from \"../../constants\";\r\nimport { MdEditSquare, MdQuickreply, MdRemoveCircle } from \"react-icons/md\";\r\n\r\nimport CommentForm from \"./CommentForm\";\r\n\r\n// This is a component to display a single comment\r\nconst Comment = ({\r\n   comment,\r\n   loggedinUserId,\r\n   affectedComment,\r\n   setAffectedComment,\r\n   addComment,\r\n   parentId = null,\r\n   updateComment,\r\n   deleteComment,\r\n   replies,\r\n}) => {\r\n   // Creating a function to render the button to reply\r\n   const isUserLoggedin = Boolean(loggedinUserId);\r\n\r\n   //   Creating Edit and Delete Function in the comments\r\n   const commentBelongsToUser = loggedinUserId === comment.user._id;\r\n   const isReplying =\r\n      affectedComment &&\r\n      affectedComment.type === \"replying\" &&\r\n      affectedComment._id === comment._id;\r\n\r\n   const isEditing =\r\n      affectedComment &&\r\n      affectedComment.type === \"editing\" &&\r\n      affectedComment._id === comment._id;\r\n\r\n   const repliedCommentId = parentId ? parentId : comment._id;\r\n   const replyOnUserId = comment.user._id;\r\n\r\n   return (\r\n      <div className=\"comment-box\">\r\n         <img src={images.theProfile} alt=\"user\" className=\"comment-image\" />\r\n         <div className=\"comment-text\">\r\n            <h5 className=\"comment-name\">{comment.user.name}</h5>\r\n            <span className=\"comment-date\">\r\n               {new Date(comment.createdAt).toLocaleDateString(\"en\", {\r\n                  day: \"numeric\",\r\n                  month: \"short\",\r\n                  year: \"numeric\",\r\n                  hour: \"2-digit\",\r\n               })}\r\n            </span>\r\n\r\n            {/* IF the editing is false render the coments*/}\r\n            {!isEditing && <p className=\"comment-desc\">{comment.desc}</p>}\r\n\r\n            {/* This is for the Editing */}\r\n            {isEditing && (\r\n               <CommentForm\r\n                  btnLabel=\"Update\"\r\n                  formSubmitHandler={(value) =>\r\n                     updateComment(value, comment._id)\r\n                  }\r\n                  formCancelHandler={() => setAffectedComment(null)}\r\n                  initialText={comment.desc}\r\n               />\r\n            )}\r\n\r\n            {/* This is for the button */}\r\n            <div className=\"comment-action\">\r\n               {isUserLoggedin && (\r\n                  <button\r\n                     className=\"comment-reply\"\r\n                     onClick={() =>\r\n                        setAffectedComment({\r\n                           type: \"replying\",\r\n                           _id: comment._id,\r\n                        })\r\n                     }\r\n                  >\r\n                     <MdQuickreply className=\"comment-action-icon\" />\r\n                     <span>Reply</span>\r\n                  </button>\r\n               )}\r\n               {commentBelongsToUser && (\r\n                  <>\r\n                     <button\r\n                        onClick={() =>\r\n                           setAffectedComment({\r\n                              type: \"editing\",\r\n                              _id: comment._id,\r\n                           })\r\n                        }\r\n                        className=\"comment-edit\"\r\n                     >\r\n                        <MdEditSquare className=\"comment-action-icon\" />\r\n                        <span>Edit</span>\r\n                     </button>\r\n                     <button\r\n                        onClick={() => deleteComment(comment._id)}\r\n                        className=\"comment-delete\"\r\n                     >\r\n                        <MdRemoveCircle className=\"comment-action-icon\" />\r\n                        <span>Delete</span>\r\n                     </button>\r\n                  </>\r\n               )}\r\n            </div>\r\n            {isReplying && (\r\n               <CommentForm\r\n                  btnLabel=\"Reply\"\r\n                  formSubmitHandler={(value) =>\r\n                     addComment(value, repliedCommentId, replyOnUserId)\r\n                  }\r\n                  formCancelHandler={() => setAffectedComment(null)}\r\n               />\r\n            )}\r\n\r\n            {/* showing the replies */}\r\n            {replies.length > 0 && (\r\n               <div className=\"replies\">\r\n                  {replies.map((reply) => (\r\n                     <Comment\r\n                        key={reply._id}\r\n                        comment={reply}\r\n                        loggedinUserId={loggedinUserId}\r\n                        affectedComment={affectedComment}\r\n                        setAffectedComment={setAffectedComment}\r\n                        addComment={addComment}\r\n                        updateComment={updateComment}\r\n                        deleteComment={deleteComment}\r\n                        replies={[]}\r\n                     />\r\n                  ))}\r\n               </div>\r\n            )}\r\n         </div>\r\n      </div>\r\n   );\r\n};\r\n\r\nexport default Comment;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
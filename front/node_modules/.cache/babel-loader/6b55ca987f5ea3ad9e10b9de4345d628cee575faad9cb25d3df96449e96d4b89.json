{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import MainLayout from\"../../components/MainLayout\";import BreadCrumbs from\"../../components/BreadCrumbs\";import SuggestedPost from\"./container/SuggestedPost\";import SidebarLeft from\"../../components/SidebarLeft\";import SidebarRight from\"../../components/SidebarRight\";import{Link,useParams}from\"react-router-dom\";import{images,stables}from\"../../constants\";import Bold from\"@tiptap/extension-bold\";import Document from\"@tiptap/extension-document\";import Paragraph from\"@tiptap/extension-paragraph\";import Text from\"@tiptap/extension-text\";import Italic from\"@tiptap/extension-italic\";import{generateHTML}from\"@tiptap/html\";import parse from\"html-react-parser\";import\"./articledetail.css\";import CommentsContainer from\"../../components/comments/CommentsContainer\";import{getSinglePost}from\"../../services/index/posts\";import{useQuery}from\"@tanstack/react-query\";import LoadingSpinner from\"../../components/LoadingSpinner\";import{useSelector}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const postData=[{id:1,title:\"Lorem ipsum dolor sit amet, consectetur adipiscing elit.\",createdAt:\"2022-01-01\"},{id:2,title:\"Lorem ipsum dolor sit amet, consectetur adipiscing elit.\",createdAt:\"2022-01-01\"},{id:3,title:\"Lorem ipsum dolor sit amet, consectetur adipiscing elit.\",createdAt:\"2022-01-01\"},{id:4,title:\"Lorem ipsum dolor sit amet, consectetur adipiscing elit.\",createdAt:\"2022-01-01\"},{id:5,title:\"Lorem ipsum dolor sit amet, consectetur adipiscing elit.\",createdAt:\"2022-01-01\"}];const tagsData=[\"Programming\",\"Development\",\"Testing\"];const ArticleDetailPage=()=>{var _userState$userInfo;const{slug}=useParams();const[breadCrumbsData,setBreadCrumbsData]=useState([]);const[body,setBody]=useState([null]);const userState=useSelector(state=>state.user);const{data}=useQuery({queryKey:[\"getSinglePost\",slug],queryFn:()=>getSinglePost({slug}),enabled:!!slug});const[isLoading,setIsLoading]=useState(true);useEffect(()=>{// Simulate data fetching (replace with your actual data fetching logic)\nsetTimeout(()=>{setIsLoading(false);},2000);},[]);useEffect(()=>{if(data){// Set breadcrumbs and body together\nsetBreadCrumbsData([{name:\"Home\",link:\"/\"},{name:\"Article\",link:\"/\"},{name:\"\".concat(data.title),link:\"/topics/\".concat(data.slug)}]);setBody(parse(generateHTML(data===null||data===void 0?void 0:data.body,[Bold,Italic,Document,Paragraph,Text])));}},[data]);console.log(data);return/*#__PURE__*/_jsx(MainLayout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"article\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"article-sidebar-left\",children:/*#__PURE__*/_jsx(SidebarLeft,{})}),/*#__PURE__*/_jsxs(\"section\",{className:\"article-detail-page\",children:[/*#__PURE__*/_jsxs(\"article\",{className:\"article-detail\",children:[/*#__PURE__*/_jsx(BreadCrumbs,{data:breadCrumbsData}),isLoading?/*#__PURE__*/_jsx(LoadingSpinner,{})// Display loading spinner while loading\n:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"article-img-box\",children:/*#__PURE__*/_jsx(\"img\",{src:data!==null&&data!==void 0&&data.photo?stables.UPLOAD_FOLDER_BASE_URL+(data===null||data===void 0?void 0:data.photo):images.noImage,alt:data===null||data===void 0?void 0:data.title,className:\"article-img\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"article-categories\",children:data===null||data===void 0?void 0:data.categories.map(category=>/*#__PURE__*/_jsx(Link,{to:\"/topics?category=\".concat(category.name),className:\"article-category\",children:category.name}))}),/*#__PURE__*/_jsx(\"h1\",{className:\"article-title\",children:data===null||data===void 0?void 0:data.title}),/*#__PURE__*/_jsx(\"p\",{className:\"article-post\",children:data===null||data===void 0?void 0:data.caption})]}),/*#__PURE__*/_jsx(CommentsContainer,{comments:data===null||data===void 0?void 0:data.comments,className:\"comments-container\",loggedinUserId:userState===null||userState===void 0?void 0:(_userState$userInfo=userState.userInfo)===null||_userState$userInfo===void 0?void 0:_userState$userInfo._id})]}),/*#__PURE__*/_jsx(SuggestedPost,{header:\"Latest Article\",post:postData,tags:tagsData})]}),/*#__PURE__*/_jsx(\"div\",{className:\"article-sidebar-right sticky\",children:/*#__PURE__*/_jsx(SidebarRight,{})})]})});};export default ArticleDetailPage;","map":{"version":3,"names":["React","useEffect","useState","MainLayout","BreadCrumbs","SuggestedPost","SidebarLeft","SidebarRight","Link","useParams","images","stables","Bold","Document","Paragraph","Text","Italic","generateHTML","parse","CommentsContainer","getSinglePost","useQuery","LoadingSpinner","useSelector","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","postData","id","title","createdAt","tagsData","ArticleDetailPage","_userState$userInfo","slug","breadCrumbsData","setBreadCrumbsData","body","setBody","userState","state","user","data","queryKey","queryFn","enabled","isLoading","setIsLoading","setTimeout","name","link","concat","console","log","children","className","src","photo","UPLOAD_FOLDER_BASE_URL","noImage","alt","categories","map","category","to","caption","comments","loggedinUserId","userInfo","_id","header","post","tags"],"sources":["C:/Users/moral/Desktop/Capstone Project JAR/JAR/src/pages/articleDetail/ArticleDetailPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport MainLayout from \"../../components/MainLayout\";\r\nimport BreadCrumbs from \"../../components/BreadCrumbs\";\r\nimport SuggestedPost from \"./container/SuggestedPost\";\r\nimport SidebarLeft from \"../../components/SidebarLeft\";\r\nimport SidebarRight from \"../../components/SidebarRight\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport { images, stables } from \"../../constants\";\r\nimport Bold from \"@tiptap/extension-bold\";\r\nimport Document from \"@tiptap/extension-document\";\r\nimport Paragraph from \"@tiptap/extension-paragraph\";\r\nimport Text from \"@tiptap/extension-text\";\r\nimport Italic from \"@tiptap/extension-italic\";\r\nimport { generateHTML } from \"@tiptap/html\";\r\nimport parse from \"html-react-parser\";\r\n\r\nimport \"./articledetail.css\";\r\nimport CommentsContainer from \"../../components/comments/CommentsContainer\";\r\n\r\nimport { getSinglePost } from \"../../services/index/posts\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport LoadingSpinner from \"../../components/LoadingSpinner\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst postData = [\r\n   {\r\n      id: 1,\r\n      title: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit.\",\r\n      createdAt: \"2022-01-01\",\r\n   },\r\n   {\r\n      id: 2,\r\n      title: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit.\",\r\n      createdAt: \"2022-01-01\",\r\n   },\r\n   {\r\n      id: 3,\r\n      title: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit.\",\r\n      createdAt: \"2022-01-01\",\r\n   },\r\n   {\r\n      id: 4,\r\n      title: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit.\",\r\n      createdAt: \"2022-01-01\",\r\n   },\r\n   {\r\n      id: 5,\r\n      title: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit.\",\r\n      createdAt: \"2022-01-01\",\r\n   },\r\n];\r\n\r\nconst tagsData = [\"Programming\", \"Development\", \"Testing\"];\r\n\r\nconst ArticleDetailPage = () => {\r\n   const { slug } = useParams();\r\n   const [breadCrumbsData, setBreadCrumbsData] = useState([]);\r\n   const [body, setBody] = useState([null]);\r\n   const userState = useSelector((state) => state.user);\r\n\r\n   const { data } = useQuery({\r\n      queryKey: [\"getSinglePost\", slug],\r\n      queryFn: () => getSinglePost({ slug }),\r\n      enabled: !!slug,\r\n   });\r\n\r\n   const [isLoading, setIsLoading] = useState(true);\r\n   useEffect(() => {\r\n      // Simulate data fetching (replace with your actual data fetching logic)\r\n      setTimeout(() => {\r\n         setIsLoading(false);\r\n      }, 2000);\r\n   }, []);\r\n\r\n   useEffect(() => {\r\n      if (data) {\r\n         // Set breadcrumbs and body together\r\n         setBreadCrumbsData([\r\n            { name: \"Home\", link: \"/\" },\r\n            { name: \"Article\", link: \"/\" },\r\n            { name: `${data.title}`, link: `/topics/${data.slug}` },\r\n         ]);\r\n         setBody(\r\n            parse(\r\n               generateHTML(data?.body, [\r\n                  Bold,\r\n                  Italic,\r\n                  Document,\r\n                  Paragraph,\r\n                  Text,\r\n               ])\r\n            )\r\n         );\r\n      }\r\n   }, [data]);\r\n   console.log(data);\r\n   return (\r\n      <MainLayout>\r\n         <div className=\"article\">\r\n            <div className=\"article-sidebar-left\">\r\n               <SidebarLeft />\r\n            </div>\r\n            <section className=\"article-detail-page\">\r\n               <article className=\"article-detail\">\r\n                  <BreadCrumbs data={breadCrumbsData} />\r\n                  {/* Generating the BreadCrumbs from the data */}\r\n                  {isLoading ? (\r\n                     <LoadingSpinner /> // Display loading spinner while loading\r\n                  ) : (\r\n                     <>\r\n                        <div className=\"article-img-box\">\r\n                           {/* Redering the image */}\r\n                           <img\r\n                              src={\r\n                                 data?.photo\r\n                                    ? stables.UPLOAD_FOLDER_BASE_URL +\r\n                                      data?.photo\r\n                                    : images.noImage\r\n                              }\r\n                              alt={data?.title}\r\n                              className=\"article-img\"\r\n                           />\r\n                        </div>\r\n                        <div className=\"article-categories\">\r\n                           {data?.categories.map((category) => (\r\n                              <Link\r\n                                 to={`/topics?category=${category.name}`}\r\n                                 className=\"article-category\"\r\n                              >\r\n                                 {category.name}\r\n                              </Link>\r\n                           ))}\r\n                        </div>\r\n\r\n                        <h1 className=\"article-title\">{data?.title}</h1>\r\n                        <p className=\"article-post\">{data?.caption}</p>\r\n                     </>\r\n                  )}\r\n\r\n                  <CommentsContainer\r\n                     comments={data?.comments}\r\n                     className=\"comments-container\"\r\n                     loggedinUserId={userState?.userInfo?._id}\r\n                  />\r\n               </article>\r\n               <SuggestedPost\r\n                  header=\"Latest Article\"\r\n                  post={postData}\r\n                  tags={tagsData}\r\n               />\r\n            </section>\r\n            <div className=\"article-sidebar-right sticky\">\r\n               <SidebarRight />\r\n            </div>\r\n         </div>\r\n      </MainLayout>\r\n   );\r\n};\r\n\r\nexport default ArticleDetailPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}